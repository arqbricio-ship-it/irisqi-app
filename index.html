<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>IRISQI ‚Äì An√°lise da √çris com IA Oriental</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1>IRISQI ‚Äì Medicina Tradicional Chinesa + IA</h1>
        <p>An√°lise avan√ßada da √≠ris com tecnologia GPT-4o-mini-vision</p>
    </header>

    <main>
        <div class="card">

            <h2>üì∏ Envie a foto da sua √≠ris</h2>
            <input type="file" id="irisInput" accept="image/*">

            <h2>üìÖ Data de nascimento</h2>
            <input type="date" id="birthdateInput" placeholder="Digite sua data de nascimento">

            <button id="analyzeBtn">üîç Analisar √çris com IA</button>

            <div id="loading" class="hidden">‚è≥ Processando imagem e gerando relat√≥rio oriental...</div>

            <h2>üìú Relat√≥rio Completo</h2>
            <div id="result"></div>
        </div>
    </main>

    <footer>
        <p>IRISQI ¬© 2025 ‚Äì Intelig√™ncia Oriental Aplicada ao Bem-Estar</p>
    </footer>

    <!-- ===== JAVASCRIPT PRINCIPAL ===== -->
    <script>
        const btn = document.getElementById("analyzeBtn");
        const result = document.getElementById("result");
        const loading = document.getElementById("loading");

        async function analyzeIris() {
            const file = document.getElementById("irisInput").files[0];
            const birthdate = document.getElementById("birthdateInput").value;

            if (!file) {
                alert("Envie uma foto da sua √≠ris.");
                return;
            }

            if (!birthdate) {
                alert("Digite sua data de nascimento.");
                return;
            }

            loading.classList.remove("hidden");
            result.innerHTML = "";

            const reader = new FileReader();
            reader.onload = async function () {
                const base64Image = reader.result.split(",")[1];

                const response = await fetch("https://api.openai.com/v1/responses", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer SUA_API_KEY_AQUI"
                    },
                    body: JSON.stringify({
                        model: "gpt-4o-mini-vision",
                        input: [
                            {
                                role: "user",
                                content: [
                                    { type: "input_text", text: `Data de nascimento: ${birthdate}` },
                                    { type: "input_image", image_url: `data:image/jpeg;base64,${base64Image}` },
                                    { type: "input_text", text: `
                                        Analise esta √≠ris usando Medicina Tradicional Chinesa (MTC).
                                        Gere:

                                        - Diagn√≥stico energ√©tico completo
                                        - Yin/Yang predominante
                                        - Elemento da MTC (Madeira, Fogo, Terra, Metal, √Ågua)
                                        - Pontos de desequil√≠brio
                                        - Sugest√µes: ch√°s, b√°lsamos, alimenta√ß√£o
                                        - T√©cnicas chinesas adequadas: Tui Na, Anma, Do-in
                                        - Pontos de acupuntura relevantes
                                        - Recomenda√ß√µes de pr√°ticas: Tai Chi, Chi Kung, respira√ß√£o
                                        - Hor√≥scopo chin√™s baseado na data fornecida
                                        - Mensagem final de fil√≥sofos chineses (Lao Tzu, Conf√∫cio, Sun Tzu)
                                        - Formatar em estilo pergaminho antigo

                                        N√£o use Tarot. Apenas filosofia chinesa.
                                    ` }
                                ]
                            }
                        ]
                    })
                });

                const data = await response.json();
                loading.classList.add("hidden");

                result.innerHTML = `
                    <div class="pergaminho">
                        ${data.output_text || "Erro ao gerar relat√≥rio"}
                    </div>
                `;
            };

            reader.readAsDataURL(file);
        }

        btn.addEventListener("click", analyzeIris);
    </script>

</body>
</html>

